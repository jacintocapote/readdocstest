

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Fixtures and Default Content &mdash; DKAN 1.13 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="DKAN 1.13 documentation" href="../index.html"/>
        <link rel="up" title="Major Components" href="index.html"/>
        <link rel="next" title="Federal Extras" href="federal-extras.html"/>
        <link rel="prev" title="DKAN Topics" href="topics.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> DKAN
          

          
          </a>

          
            
            
              <div class="version">
                1.13
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">DKAN Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Major Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dataset/index.html">Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore/index.html">Datastore</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvest.html">Harvester</a></li>
<li class="toctree-l2"><a class="reference internal" href="workflow.html">Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="topics.html">Topics</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Fixtures and Default Content</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#default-content-module">Default Content Module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#updating-the-fixtures">Updating the fixtures</a></li>
<li class="toctree-l4"><a class="reference internal" href="#importing-default-content">Importing default content</a></li>
<li class="toctree-l4"><a class="reference internal" href="#removing-the-default-content">Removing the default content</a></li>
<li class="toctree-l4"><a class="reference internal" href="#upgrading-pages-from-ctools-panel-pages-to-page-nodes">Upgrading pages from ctools panel pages to page nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#about-paths">About paths</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#taxonomy-fixtures">Taxonomy Fixtures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="federal-extras.html">Federal Extras</a></li>
<li class="toctree-l2"><a class="reference internal" href="search.html">Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="theme.html">Theme</a></li>
<li class="toctree-l2"><a class="reference internal" href="permissions.html">Roles and Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="storytelling/index.html">Storytelling</a></li>
<li class="toctree-l2"><a class="reference internal" href="open-data-schema.html">Open Data Schema Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualizations.html">Visualizations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Extending and Customizing DKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apis/index.html">API Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Releases</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">DKAN</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Major Components</a> &raquo;</li>
      
    <li>Fixtures and Default Content</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/components/fixtures.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fixtures-and-default-content">
<span id="fixtures-and-default-content"></span><h1>Fixtures and Default Content<a class="headerlink" href="#fixtures-and-default-content" title="Permalink to this headline">¶</a></h1>
<p><em>Fixtures</em> are a programming concept for default data that is included with application code for testing or other purposes. The data is provided in a structured format like XML or JSON, and imported into the database as part of a build process.</p>
<p>In DKAN, fixtures are used to provide datasets and other supporting content out of the box. The most visible use case for this will be DKAN&#8217;s default content, which showcases DKAN&#8217;s various capabilities. The fixtures themselves for default content are packaged in a separate sub-module, <a class="reference external" href="https://github.com/NuCivic/dkan/tree/7.x-1.x/modules/dkan/dkan_fixtures/modules/dkan_default_content">DKAN Default Content</a>.</p>
<p>The DKAN Fixtures module provides tools to easily export all the content that lives inside a
DKAN site into JSON fixture files, following a defined schema. Currently the content supported by the module are Groups, Resources, Datasets, Data Dashboards, Data Stories and Pages. <a class="reference external" href="https://github.com/NuCivic/visualization_entity">Visualization Entites</a> are also supported.</p>
<p>The module also provides basic Migrate classes that can be used to import content easily on a DKAN site.</p>
<div class="section" id="default-content-module">
<span id="default-content-module"></span><h2>Default Content Module<a class="headerlink" href="#default-content-module" title="Permalink to this headline">¶</a></h2>
<p>DKAN Default Content is the module that holds all the default content delivered with DKAN. All content is
imported through the <em>fixtures</em> that can be found inside the /data directory. <a class="reference external" href="https://github.com/NuCivic/dkan/tree/7.x-1.x/modules/dkan/dkan_fixtures">DKAN Fixtures</a> was used to generate
the default content fixtures and to migrate all the data using the migration clases that are provided.</p>
<div class="section" id="updating-the-fixtures">
<span id="updating-the-fixtures"></span><h3>Updating the fixtures<a class="headerlink" href="#updating-the-fixtures" title="Permalink to this headline">¶</a></h3>
<p>The default content fixtures can be updated easily through the DKAN Default Content module using the following steps:</p>
<ol class="simple">
<li>All the content present on the DB is going to be exported, so be sure to clean all the content first.</li>
<li>Run <code class="docutils literal"><span class="pre">drush</span> <span class="pre">dkan-save-data</span></code></li>
<li>All default content fixtures should be updated and saved inside the &#8216;data&#8217; directory in the dkan_default_content module.</li>
</ol>
<p>Please note that some rules should be followed when preparing the default content:</p>
<ul class="simple">
<li>Only published datasets are going to be exported.</li>
<li>Only resources associated with datasets are going to be exported.</li>
<li>Only groups that have associated datasets are going to be exported.</li>
<li>The size of of the dkan_default_content module should be kept as small as possible, so small files and images should be used.</li>
<li>When using internal visualizations as visualization embeds be sure to use the &#8216;Local&#8217; option on the visualization embed settings, so that embeds are not pointing to a specific domain.</li>
</ul>
</div>
<div class="section" id="importing-default-content">
<span id="importing-default-content"></span><h3>Importing default content<a class="headerlink" href="#importing-default-content" title="Permalink to this headline">¶</a></h3>
<p>All the default content is imported automatically as soon as the DKAN Default Content module is enabled. Enable the DKAN Default Content module in the browser via admin/modules, or on the command line via drush:</p>
<p><code class="docutils literal"><span class="pre">drush</span> <span class="pre">en</span> <span class="pre">dkan_default_content</span></code></p>
</div>
<div class="section" id="removing-the-default-content">
<span id="removing-the-default-content"></span><h3>Removing the default content<a class="headerlink" href="#removing-the-default-content" title="Permalink to this headline">¶</a></h3>
<p>All the default content is automatically removed as soon as the DKAN Default Content module is disabled
with the exception of pages (Homepage, About page, etc). Disable the DKAN Default Content module in the browser via admin/modules, or on the command line via drush:</p>
<p><code class="docutils literal"><span class="pre">drush</span> <span class="pre">dis</span> <span class="pre">dkan_default_content</span></code></p>
</div>
<div class="section" id="upgrading-pages-from-ctools-panel-pages-to-page-nodes">
<span id="upgrading-pages-from-ctools-panel-pages-to-page-nodes"></span><h3>Upgrading pages from ctools panel pages to page nodes<a class="headerlink" href="#upgrading-pages-from-ctools-panel-pages-to-page-nodes" title="Permalink to this headline">¶</a></h3>
<p>Starting with DKAN 7.x-1.13, the default homepage has been converted from a Panel Page into a common page node. Page nodes now have panelizer enabled, so the full layout of a panel page can be reproduced in a simple page node. DKAN now provides a function that can be used to perform this conversion automatically. The provided function will:</p>
<ul class="simple">
<li>Generate an exact copy of the specified panel page automatically.</li>
<li>Generate a new panelized page node and disable (not delete) the old ctools panel page homepage</li>
<li>The new node page will be set as the site homepage if the $is_homepage parameter is set as &#8216;true&#8217;.</li>
</ul>
<p>Please note that some CSS adjustments might be needed in order for the node page to look exactly like the panel page, as CSS IDs and classes might be different.</p>
<p>The function can be found in the dkan_sitewide module and can be used as follows:</p>
<p><code class="docutils literal"><span class="pre">drush</span> <span class="pre">php-eval</span> <span class="pre">&quot;dkan_sitewide_convert_panel_page(&lt;page-name&gt;);&quot;</span></code></p>
</div>
<div class="section" id="about-paths">
<span id="about-paths"></span><h3>About paths<a class="headerlink" href="#about-paths" title="Permalink to this headline">¶</a></h3>
<p>Pathauto is disabled for content created using dkan_fixtures because performance reasons. Instead, paths should be added to the fixtures using the path key.</p>
</div>
</div>
<div class="section" id="taxonomy-fixtures">
<span id="taxonomy-fixtures"></span><h2>Taxonomy Fixtures<a class="headerlink" href="#taxonomy-fixtures" title="Permalink to this headline">¶</a></h2>
<p>A similar system exists for importing and exporting taxonomy terms as default content. The NuCivic-created <a class="reference external" href="https://github.com/NuCivic/taxonomy_fixtures">Taxonomy Fixtures module</a> ships with DKAN but is available for us in other Drupal projects.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="federal-extras.html" class="btn btn-neutral float-right" title="Federal Extras" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="topics.html" class="btn btn-neutral" title="DKAN Topics" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.13',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>